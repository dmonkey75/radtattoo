!function(e,t,s,c){"use strict";var a,r=wpgdprcData.ajaxURL,n=wpgdprcData.ajaxSecurity,o=(a=0,function(e,t){clearTimeout(a),a=setTimeout(e,t)}),i=e(".wpgdprc"),p=e('input[type="checkbox"]',e(".wpgdprc-checkbox, .wpgdprc-setting",i)),d=e(".wpgdprc-select-all",i),l=e(".wpgdprc-form--process-delete-requests"),u=e("#"+wpgdprcData.dismissibleNotice),g=function(e){var t=e.data();return t.option||(t.option=e.attr("name")),e.is("input")&&(t.value=e.val(),e.is('input[type="checkbox"]')&&(t.enabled=e.is(":checked"))),t},h=function t(s,c,a){var o=s.slice(0,1);if(o.length>0){var i=e(".wpgdprc-message",c),p=e('tr[data-id="'+o[0]+'"]',c);p.removeClass("wpgdprc-status--error"),p.addClass("wpgdprc-status--processing"),i.attr("style","display: none;"),i.removeClass("wpgdprc-message--error"),i.empty(),setTimeout((function(){e.ajax({url:r,type:"POST",dataType:"JSON",data:{action:"wpgdprc_process_delete_request",security:n,data:{id:o[0]}},success:function(a){a&&(p.removeClass("wpgdprc-status--processing"),a.error?(p.addClass("wpgdprc-status--error"),i.html(a.error),i.addClass("wpgdprc-message--error"),i.removeAttr("style")):(s.splice(0,1),e('input[type="checkbox"]',p).remove(),p.addClass("wpgdprc-status--removed"),e(".dashicons-no",p).removeClass("dashicons-no").addClass("dashicons-yes"),t(s,c,500)))}})}),a||0)}},m=function(){l.length&&l.on("submit",(function(t){t.preventDefault();var s=e(this),c=e(".wpgdprc-checkbox",s);d.prop("checked",!1),h(function(t){var s=[];return t.length&&t.each((function(){var t=e(this),c=t.val();t.is(":checked")&&c>0&&s.push(c)})),s}(c),s)}))};e((function(){if(function(){if(u){var t=u.find("button.notice-dismiss");t&&t.on("click",(function(){e.ajax({url:r,type:"GET",dataType:"JSON",data:{action:wpgdprcData.dismissibleNotice,security:n,data:{dismissed:!0}},error:function(e){console.log(e)}})}))}}(),i.length){p.length&&p.on("change",(function(t){e(this).data("option")&&(t.preventDefault(),function(t){t.addClass("processing");var c=t.closest(".wpgdprc-checkbox"),a=!!c.length&&c.next(".wpgdprc-checkbox-data");e.ajax({url:r,type:"POST",dataType:"JSON",data:{action:"wpgdprc_process_settings",security:n,data:g(t)},success:function(e){e&&(e.error?(t.is(":checked")&&t.prop("checked",!1),t.addClass("alert")):(a.length&&(t.is(":checked")?a.stop(!0,!0).slideDown("fast"):a.stop(!0,!0).slideUp("fast")),e.redirect&&(s.location.href=currentPage)))},complete:function(){t.removeClass("processing"),o((function(){t.removeClass("alert")}),2e3)}})}(e(this)))})),d.length&&d.on("change",(function(){var t=e(this),s=t.is(":checked");e('tbody input[type="checkbox"]',t.closest("table")).prop("checked",s)})),m();var t=s.getElementById("wpgdprc_snippet");null!==t&&CodeMirror.fromTextArea(t,{mode:"text/html",lineNumbers:!0,matchBrackets:!0,indentUnit:4})}}))}(jQuery,window,document);